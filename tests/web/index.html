<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Core Uploader</title>
    <script src="../../dist/fileup-core.js"></script>
    <script src="jquery-1.12.0.min.js"></script>
</head>
<body>

<script>
    $(function () {

        var uploader = window.uploader = new FileUp({
            backendUrl: 'server.php'
        });

        var container = $('body');

        container.find('.uploader-browse').on('click', function () {
            uploader.browse();
        });

        uploader.queue.on(FileUp.models.QueueCollection.EVENT_ADD, function (files) {
            /**
             * @param {FileUp.models.File} file
             **/
            var getProgressText = function(file) {
                return [
                    Math.round(file.getBytesUploaded() / 1000) + ' of ' + Math.round(file.getBytesTotal() / 1000) + ' kb',
                    file.progress.getPercent() + '%',
                    file.progress.getTimeLeft() + 's left',
                    (Math.round(file.progress.getSpeed() / 1000) / 1000) + 'Mb/s'
                ].join(', ');
            };

            $.each(files,
                    /**
                     * @param {number} i
                     * @param {FileUp.models.File} file
                     **/
                    function (i, file) {
                        var li = $('<li />')
                                .appendTo(container.find('.uploader-list'))
                                .append(
                                        $('<span class="status" style="padding-right: 10px; color: darkgreen;" />').text(file.getStatus())
                                )
                                .append(
                                        $('<span class="name" />').text(file.getName())
                                )
                                .append(
                                        $('<div class="actions" />').append(
                                                $('<button />')
                                                        .text('Pause')
                                                        .on('click', function() {
                                                            file.pause();
                                                            $(this).text($(this).text() === 'Pause' ? 'Resume' : 'Pause')
                                                        })
                                        )
                                )
                                .append(
                                        $('<div class="progress" />').text(getProgressText(file))
                                )
                                .append(
                                        $('<div class="error" style="color: darkred;" />')
                                );

                        file.on([FileUp.models.File.EVENT_STATUS], function () {
                            li.find('.actions').toggle(file.isStatusProcess() || file.isStatusPause());
                            li.find('.status').text(file.getStatus());
                            if (file.isStatusEnd() && file.isResultError()) {
                                li.find('.error').text(file.getResultHttpStatus() + ': ' + file.getResultHttpMessage());
                            }
                        });
                        file.on(FileUp.models.File.EVENT_PROGRESS, function () {
                            li.find('.progress').text(getProgressText(file));
                        });
                    });
        });
    })
</script>

<button class="uploader-browse">Add files</button>
<ul class="uploader-list"></ul>

</body>
</html>